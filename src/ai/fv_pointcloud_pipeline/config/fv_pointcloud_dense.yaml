steps:
  # Step1: 外れ値をゆるめに弾く（細い個体の保持優先）
  - type: statistical_outlier
    mean_k: 15
    stddev_mul: 1.3
    debug_topic: step1_sor

  # Step2: Z帯域（非対称）で背面を強めにカット
  - type: pass_through
    field: z
    min: "$root_depth - 0.06"
    max: "$root_depth + 0.04"
    debug_topic: step2_zband

  # Step3: 地面除去（RANSAC）
  - type: ground_remove
    distance_threshold: 0.015
    max_iterations: 100
    axis: [0.0, 0.0, 1.0]
    angular_threshold_deg: 25.0
    keep_largest_cluster: true
    debug_topic: step3_ground

  # Step4: 最大クラスタ抽出（主体のみ）
  - type: cluster_keep_largest
    tolerance: 0.015
    min_size: 20
    max_size: 120000
    debug_topic: step4_cluster

  # Step5: 最後に軽くボクセル化（見た目と負荷の安定化）
  - type: voxel_grid
    leaf_size: 0.004
    debug_topic: step5_voxel

